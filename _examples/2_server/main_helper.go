package main

import (
	"github.com/gourd/gorest"
	"github.com/gourd/service"
	"net/http"
	"upper.io/db"
)

// getServer
//
// drafted gourd generated server
// will be generated by gourd CLI tool eventually
//
// Should also be a http.Handler that
// cound be tested by wrapping httptest sevrer
func getServer() *negroni.Negroni {

	// define db
	//db := db.Open(sqlite.Adapter, sqlite.ConnectionURL{Database: `/path/to/example.db`,})

	// create router specific / independent middleware
	//ep := &EncoderPrvdr{}
	//cp := &GorillaPatCondPrvdr{}
	//ap := &OAuth2Prvdr{}

	// provide services to auth provider
	//ap.UseServices(ClientService{db}, AuthService{db}, AccessService{db})

	// create router of the specific type
	//r := pat.New()

	// create negroni middleware handler
	// with middlewares
	//n := negroni.New(
	//	negroni.Wrap(ep),
	//	negroni.Wrap(cp),
	//	negroni.Wrap(ap.Mid()))

	// add services rest to router
	//rt := "gorilla/pat"
	//gorest.Rest(rt, r, "/api/posts", PostService{db})
	//gorest.Rest(rt, r, "/api/comments", CommentService{db})

	// add oauth2 endpoints
	//AddOAuth2(r, "/oauth", ap)

	// use router in negroni
	//n.UseHandler(secureMux)

}

// gourdMain
//
// gourd generated main
// feel free to copy the code and change
func gourdMain() {
	s := getServer()
	if s != nil {
		s.Run(":8080") // negroni specific
	}
}
